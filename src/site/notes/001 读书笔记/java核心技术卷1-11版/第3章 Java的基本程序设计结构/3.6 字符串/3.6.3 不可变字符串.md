---
{"dg-publish":true,"permalink":"/001/java-1-11/3-java/3-6/3-6-3/","dgPassFrontmatter":true,"created":"2024-04-15T15:34:33.403+08:00","updated":"2024-06-01T10:43:41.082+08:00"}
---

String 类没有提供修改字符串中某个字符的方法。如果希望将 geeting 的内容修改为“Help!”，不能直接将 geeting 的最后两个位置的字符修改为  'p' 和 '!' 。在 Java 中实现这项操作非常容易。可以提取想要保留的子串，再与希望替换的字符拼接:

```java
greeting = greeting.substring(0,3) + "p!";
```

在 Java 中 String 类对象时**不可变**的，如同数字 3 永远是数字 3 一样，字符串 “Hello” 永远包含字符 H、e、l、l、o的代码单元序列。你不能修改这些值，不过，可以修改字符串变量 greeting，让它引用另外一个字符串。

>这样做是否会降低运行效率呢? 看起来好像修改一个代码单元要比从头创建一个新字符串更加简洁。答案是 : 也对，也不对。的确，通过拼接“Hel”和“p!”来创建一个新字符串的效率确实不高。但是，不可变字符串却有一个优点: 编译器可以让字符串共享。
>
>为了弄清具体的工作方式，可以想象将各种字符串存放在公共的存储池中。字符串变量指向存储池中相应的位置。如果复制一个字符串变量，原始字符串与复制的字符串共享相同的字符。
>
>总而言之，Java 的设计者认为共享带来的高效率远远胜过于提取子串、拼接字符串所带来的低效率。可以看看你自己的程序，我们发现: 大多数情况下都不会修改字符串，而只是需要对字符串进行比较 (有一种例外情况，将来自于文件或键盘的单个字符或较短的字符串组装成字符串。为此， Java提供了一个单独的类，在 3.6.9节中将详细介绍 ) 。