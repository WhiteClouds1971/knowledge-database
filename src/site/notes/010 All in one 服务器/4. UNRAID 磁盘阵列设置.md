---
{"dg-publish":true,"permalink":"/010 All in one 服务器/4. UNRAID 磁盘阵列设置/","dgPassFrontmatter":true,"created":"2024-06-11T10:09:48.495+08:00","updated":"2024-06-12T10:49:41.047+08:00"}
---

磁盘阵列初步分配情况如下图所示：

![Pasted image 20240611200602.png](/img/user/$/$Sys999%20Attachment/Pasted%20image%2020240611200602.png)

考虑到 ZFS 基本是未来主流的文件系统，并且 UNRAID 也在逐步增加对 ZFS 的支持。因此所有设备都手动指定 ZFS 文件系统。

下面按照上图设备目录依次介绍
# 磁盘阵列设备

![Pasted image 20240611201631.png](/img/user/$/$Sys999%20Attachment/Pasted%20image%2020240611201631.png)

这是服务器的主存储池，需要考虑容量及校验这两面。这里直接使用 UNRAID 自带的阵列协议，即方便扩容阵列，也提供了最多 2 块硬盘的损坏冗余。

这也是我不选择 TrueNas 组 RAID 阵列的原因（RAID 参见: [[TP309.3 数据备份与恢复/RAID\|RAID]]）, RAID 不仅对阵列设备的最小数量有要求。而且后期扩容也不是很方便。

目前阵列设备里只有一张 3T 的西部数据紫盘（毕竟我很穷）。未来如果数据量增多，可以再买几张机械盘插进去。校验盘可以使用 1 块或 2 块 3T 的 ssd，注意校验盘的容量必须是阵列里**所有单块硬盘容量的最大值之一**

当然，UNRAID 也不是一点坏处都没有。在速度上，受限于需要写校验数据，并且 UNRAID 一次只会往一块硬盘里写数据，所以速度一定是小于单块硬盘的速度。
# 池设备

![Pasted image 20240611203342.png](/img/user/$/$Sys999%20Attachment/Pasted%20image%2020240611203342.png)

UNRAID 6.x 更新了池设备这个选项，作用之一就是代替了以前的缓存盘。但是目前 UNRAID 6.10.12 对 ZFS 的支持还很弱鸡，实用性不是太高。目前只使用了一张 512G NVM 协议的固态主要做为缓存来使用。

后面验证完虚拟机之后，打算在把添加一张 512G 的 NVM 固态。一起组 RAID0 容量速度直接翻倍。至于数据的安全性吗，啊哈哈哈哈哈哈，没有。
# 引导设备
![Pasted image 20240611204648.png](/img/user/$/$Sys999%20Attachment/Pasted%20image%2020240611204648.png)

装 UNRAID 的 U 盘，以后可以验证一下怎么无损迁移 UNRAID 的启动 U 盘。
# 未分配设备

![Pasted image 20240611204736.png](/img/user/$/$Sys999%20Attachment/Pasted%20image%2020240611204736.png)

这里目前是 win10 的启动盘。未来可以添加到 Cache 里组 RAID0
# 启动磁盘阵列

![Pasted image 20240611204927.png](/img/user/$/$Sys999%20Attachment/Pasted%20image%2020240611204927.png)

在主界面的最下面有一个启动按钮，点击即可启动 UNRAID 阵列。

在启动完阵列之后，需要勾选启动按钮旁边的格式化复选框，格式化新添加的硬盘。注意选择格式化后**会删除新添加硬盘里的全部数据**。
# 补充

在格式化完硬盘后，如果你发现硬盘的容量不对。可以使用硬盘工具将硬盘的引导改为 GPT，并且删除所有分区在重新格式化试一试。